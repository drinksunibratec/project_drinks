<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" lang="pt-BR">
<h:head>
	<title>Serviços Gerais</title>

	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<ui:include src="/pages/dialog/confirm.xhtml" />
	<ui:include src="/pages/menu/menu.xhtml" />

</h:head>
<h:body>
	<h:form id="formTipoProblema">
		<p:messages id="messages" />
		<p:panel id="Cadastro" header="Cadastro" style="margin-bottom:20px">
			<h:panelGrid columns="2" cellpadding="5">

				<p:outputLabel for="nome" value="Nome:" />
				<p:inputText id="nome" value="#{tipoDeProblema.problema.nome}" />

				<p:selectBooleanCheckbox id="ativo" 
					value="#{tipoDeProblema.problema.ativo}" />
				<p:outputLabel for="ativo" value="Ativo" />


				<p:commandButton value="Inserir" action="#{tipoDeProblema.inserir}"
					rendered="#{!tipoDeProblema.edit}" update="@form">
				</p:commandButton>
				
				<p:commandButton value="Editar" action="#{tipoDeProblema.editar}"
					rendered="#{tipoDeProblema.edit}" update="@form">
				</p:commandButton>
				<p:commandButton value="Cancelar"
					action="#{tipoDeProblema.cancelar}" update="@form">
				</p:commandButton>
			</h:panelGrid>
		</p:panel>

		<p:panel id="Listagem" header="Listagem" style="margin-bottom:20px">

			<p:dataTable id="dtTable" var="obj"
				value="#{tipoDeProblema.list}" paginator="true" rows="10"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
				emptyMessage="Sem registros encontrados">

				<p:column headerText="Id" filterBy="#{obj.id}" sortBy="#{obj.id}"
					filterMatchMode="contains">
					<h:outputText value="#{obj.id}" />
				</p:column>

				<p:column headerText="Nome" filterBy="#{obj.nome}"
					sortBy="#{obj.nome}" filterMatchMode="contains">
					<h:outputText value="#{obj.nome}" />
				</p:column>

				<p:column headerText="data" filterBy="#{obj.dataUltimaAtualizacao}"
					sortBy="#{obj.dataUltimaAtualizacao}s" filterMatchMode="contains">
					<h:outputText value="#{obj.dataUltimaAtualizacao}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>

				<p:column headerText="Ativo" filterBy="#{obj.ativo}"
					sortBy="#{obj.ativo}" filterMatchMode="contains">
					<h:outputText value="#{obj.ativo ? 'SIM' : 'NÃO'} " />
				</p:column>

				<p:column headerText="Ações">
					<p:commandButton value="Editar" icon="ui-icon-pencil" 
						actionListener="#{tipoDeProblema.loadEdit(obj)}"
						update="@form" title="Editar">
					</p:commandButton>

					<p:commandButton value="Excluir" icon="ui-icon-closethick"
						action="#{tipoDeProblema.excluir(obj)}" update="@form"
						title="Excluir">
						 <p:confirm header="Confirmação" message="Deseja deletar o registro?" icon="ui-icon-alert" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
		</p:panel>

	</h:form>

</h:body>
</html>