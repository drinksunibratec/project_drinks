<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" lang="pt-BR">
<h:head>
	<title>Serviços Gerais</title>

	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<ui:include src="/pages/dialog/confirm.xhtml" />
	<ui:include src="/pages/menu/menu.xhtml" />

</h:head>
<h:body>
	<h:form id="formTecnico">
		<p:messages id="messages" />
		<p:panel id="Cadastro" header="Cadastro" style="margin-bottom:20px">
			<h:panelGrid columns="2" cellpadding="5">

				

				<p:outputLabel value="Usuário:" for="usuario"></p:outputLabel>
				<p:autoComplete id="usuario"
					value="#{tecnicoBean.tecnico.usuario}"  dropdown="true"
					completeMethod="#{tecnicoBean.getUsuariosAutoComplete}" var="s"
					itemLabel="#{s.nome}" itemValue="#{s}" minQueryLength="2"
					maxResults="10" title="Busca por servidores"
					converter="simpleEntity">
				</p:autoComplete>

				


				<p:outputLabel for="especialidade" value="Especialidade:" />
				<p:inputText id="especialidade"
					value="#{tecnicoBean.tecnico.especialidade}" />

				<p:selectBooleanCheckbox id="ativo"
					value="#{tecnicoBean.tecnico.ativo}" />
				<p:outputLabel for="ativo" value="Ativo" />

				<p:commandButton value="Inserir" action="#{tecnicoBean.inserir}"
					rendered="#{!tecnicoBean.edit}" update="@form">
				</p:commandButton>

				<p:commandButton value="Editar" action="#{tecnicoBean.editar}"
					rendered="#{tecnicoBean.edit}" update="@form">
				</p:commandButton>
				<p:commandButton value="Cancelar" action="#{tecnicoBean.cancelar}"
					update="@form">
				</p:commandButton>

			</h:panelGrid>
		</p:panel>

		<p:panel id="Listagem" header="Listagem" style="margin-bottom:20px">

			<p:dataTable id="dtTable" var="obj" value="#{tecnicoBean.list}"
				paginator="true" rows="10"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
				emptyMessage="Sem registros encontrados">

				<p:column headerText="Nome" filterBy="#{obj.usuario.nome}"
					sortBy="#{obj.usuario.nome}" filterMatchMode="contains">
					<h:outputText value="#{obj.usuario.nome}" />
				</p:column>
				
				<p:column headerText="Especialidade:" filterBy="#{obj.especialidade}"
					sortBy="#{obj.especialidade}" filterMatchMode="contains">
					<h:outputText value="#{obj.especialidade}" />
				</p:column>

				<p:column headerText="Ativo" filterBy="#{obj.ativo}"
					sortBy="#{obj.ativo}" filterMatchMode="contains">
					<h:outputText value="#{obj.ativo ? 'SIM' : 'NÃO'} " />
				</p:column>


					<p:column headerText="Ações">
					<p:commandButton value="Editar" icon="ui-icon-pencil"
						actionListener="#{tecnicoBean.loadEdit(obj)}" update="@form"
						title="Editar">
					</p:commandButton>

					<p:commandButton value="Excluir" icon="ui-icon-closethick"
						action="#{tecnicoBean.excluir(obj)}" update="@form" title="Excluir">
						<p:confirm header="Confirmação"
							message="Deseja deletar o registro?" icon="ui-icon-alert" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
		</p:panel>


	</h:form>

</h:body>
</html>