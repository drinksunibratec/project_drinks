package dados;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Query;

import basicas.Comentario;
import basicas.Solicitacao;
import dados.geral.DAOGenerico;

public class ComentarioDAO extends DAOGenerico<Comentario>{

	public ComentarioDAO(EntityManagerFactory emf) {
		super(emf);
	}
	
	public List<Comentario> getComentariosPorSolicitacao(Solicitacao solicitacao) {
		List<Comentario> instance = null;
		EntityManager em = this.getEntityManagerFactory().createEntityManager();
		try {
			String sql = "SELECT * FROM " + getPersistentClass().getName() + " C WHERE C.id_solicitacao = :N";
			Query query =  em.createQuery(sql, Comentario.class);
			query.setParameter("N", solicitacao.getId());
			
			instance = query.getResultList();
		} catch (RuntimeException re) {
			re.printStackTrace();
		}
		em.close();
		return instance;
	}
	
	

}
